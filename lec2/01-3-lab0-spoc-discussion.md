## v9-cpu相关题目
---

### 提前准备
```
sudo apt-get install hexedit
cd YOUR v9-cpu DIR
git pull v9-cpu 
cd YOUR os_course_spoc_exercise DIR
git pull os_course_spoc_exercise
```

分析和实验funcall.c，需要完成的内容包括： 

 - 修改代码，可正常显示小组两位同学的学号（用字符串） 
 - 生成funcall.c的汇编码，理解其实现并给汇编码写注释
 - 尝试用xem的简单调试功能单步调试代码
 - 回答如下问题：
   - funcall中的堆栈有多大？是内核态堆栈还是用户态堆栈
     - 128M-4M-代码和数据大小，内核态
   - funcall中的全局变量ret放在内存中何处？如何对它寻址？
     - 全局地址，内存中0xA8，寻址用LG、SG
   - funcall中的字符串放在内存中何处？如何对它寻址？
     - 全局地址，内存中0x90，寻址用LG、SG
   - 局部变量i在内存中的何处？如何对它寻址？
     - 栈中，*(sp+4)，用LL、SL命令
   - 当前系统是处于中断使能状态吗？
     - 不是
   - funcall中的函数参数是如何传递的？函数返回值是如何传递的？
     - 参数用PSHA或PSHI指令压入栈中，返回值用寄存器a
   - 分析并说明funcall执行文件的格式和内容
     - 00000000~00000003: Magic Number 0xC0DEF00D
     00000004~00000007: bss，代码区的长度
     00000008~0000000b: entry，代码的入口位置
     0000000c~0000000f: flags，值为0
     00000010~0000009f: 代码
     000000a0~000000b7: 全局变量
　

分析和实验os0.c，需要完成的内容包括： 
-[X]

 - 生成os0.c的汇编码，理解其实现并给汇编码写注释
 - 尝试用xem的简单调试功能单步调试代码
 - 回答如下问题：
   - 何处设置的中断使能？   
   - 系统何时处于中断屏蔽状态？
   - 如果系统处于中断屏蔽状态，如何让其中断使能？
   - 系统产生中断后，CPU会做哪些事情？（在没有软件帮助的情况下）
   - CPU执行RTI指令的具体完成工作是哪些？

[HARD]分析和实验os1/os3.c，需要完成的内容包括： 
-[X]
 
 - os1中的task1和task2的堆栈的起始和终止地址是什么？
 - os1是如何实现任务切换的？
 - os3中的task1和task2的堆栈的起始和终止地址是什么？
 - os3是如何实现任务切换的？
 - os3的用户态task能够破坏内核态的系统吗？